#!/bin/bash

echo "FROM saucisson/with-minimal:testing-amd64" > Dockerfile

# We get the needed programs for repository management
echo "RUN apt-get update" >> Dockerfile
echo "RUN apt-get install gnupg devscripts dput coreutils" >> Dockerfile

# Adding repository scripts
echo "RUN mkdir -p /root" >> Dockerfile
echo "ADD ./upload.sh /root/upload.sh" >> Dockerfile
echo "ADD ./sign-release.sh /root/sign-release.sh" >> Dockerfile

# Some configuration
echo "RUN mkdir -p /var/www/debian" >> Dockerfile
# gpg key must be generated by the user afterwards because it needs randomness
# to generate entropy (mouse movements, keyboard inputs, disk I/O, ...)
# It must then be exported in text format and put in /var/www/

